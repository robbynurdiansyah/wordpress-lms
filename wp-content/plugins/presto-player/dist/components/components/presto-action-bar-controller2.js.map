{"file":"presto-action-bar-controller2.js","mappings":"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","names":["__stencil_proxyCustomElement"],"sources":["src/components/core/features/presto-action-bar/controller/presto-action-bar-controller.scss?tag=presto-action-bar-controller&encapsulation=shadow","src/components/core/features/presto-action-bar/controller/presto-action-bar-controller.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n","import { Component, Element, Event, EventEmitter, h, Prop, State, Watch } from '@stencil/core';\nimport { ActionBarConfig, YoutubeConfig } from '../../../../../interfaces';\nimport { timePassed } from '../../../../../util';\n\n@Component({\n  tag: 'presto-action-bar-controller',\n  styleUrl: 'presto-action-bar-controller.scss',\n  shadow: true,\n})\nexport class PrestoActionBar {\n  @Element() el: HTMLElement;\n\n  @Prop() ended: boolean;\n  @Prop() config: ActionBarConfig;\n  @Prop({ reflect: true }) currentTime: number;\n  @Prop({ reflect: true }) duration: number;\n  @Prop() direction?: 'rtl';\n  @Prop() youtube?: YoutubeConfig;\n\n  @State() show: boolean = false;\n  @State() youtubeRenderKey: number = 1;\n  @State() percentagePassed: number = 0;\n  @Event() actionBarStateChange: EventEmitter<boolean>;\n\n  componentWillLoad() {\n    this.handleDuration();\n  }\n\n  /**\n   * Wait for duration to start before checking time\n   * @returns void\n   */\n  @Watch('duration')\n  handleDuration() {\n    this.handleTime();\n  }\n\n  /**\n   * Handle with the player is ended\n   * @param val\n   * @returns\n   */\n  @Watch('ended')\n  handleEnded(val) {\n    if (val) {\n      if (this?.config?.percentage_start !== 100) return;\n      this.show = true;\n    }\n  }\n\n  @Watch('currentTime')\n  @Watch('duration')\n  handlePercentagePassed() {\n    this.percentagePassed = (this.currentTime / this.duration) * 100;\n  }\n\n  /**\n   * When current time changes, check to see if we should\n   * enable the overlay\n   * @returns void\n   */\n  @Watch('currentTime')\n  handleTime() {\n    this.checkTime();\n  }\n\n  /**\n   * Set enabled/disabled based on time that has passed\n   */\n  checkTime() {\n    if (window?.wp?.blocks) {\n      this.show = true;\n      return;\n    }\n    // if ( this.config?.percentage_start === 0) {\n    //   this.show = true;\n    // } else {\n\n    // console.log(this.currentTime, this.duration, this.config?.percentage_start);\n    this.show = timePassed({\n      current: this.currentTime,\n      duration: this.duration,\n      showAfter: this.config?.percentage_start,\n    });\n  }\n\n  @Watch('config')\n  handleButtonCountChange(newVal, oldVal) {\n    if (newVal?.button_count !== oldVal?.button_count) {\n      this.youtubeRenderKey++;\n    }\n    if (newVal?.enabled) {\n      this.handleDuration();\n    }\n  }\n\n  youtubeButton() {\n    if (this.config?.button_type !== 'youtube' || !this.youtube?.channelId) {\n      return;\n    }\n\n    return <presto-youtube-subscribe-button key={this.youtubeRenderKey} channel={this.youtube?.channelId} showCount={this.config?.button_count}></presto-youtube-subscribe-button>;\n  }\n\n  customButton() {\n    if (this.config?.button_type !== 'custom') {\n      return;\n    }\n\n    return (\n      <presto-player-button\n        type=\"primary\"\n        size=\"small\"\n        href={this.config?.button_link?.url}\n        target={this.config?.button_link?.opensInNewTab ? '_blank' : '_self'}\n        style={{\n          '--presto-player-button-border-radius': `${this.config?.button_radius}px`,\n          ...(this.config?.button_color\n            ? {\n                '--presto-player-button-color': `${this.config?.button_color}`,\n              }\n            : {}),\n          ...(this.config?.button_text_color\n            ? {\n                '--presto-player-button-text': `${this.config?.button_text_color}`,\n              }\n            : {}),\n        }}\n      >\n        {this.config?.button_text}\n      </presto-player-button>\n    );\n  }\n  @Watch('show')\n  handleCtaStateChange(val) {\n    this.actionBarStateChange.emit(val);\n  }\n  render() {\n    return (\n      <presto-action-bar-ui\n        open={this.show}\n        style={{\n          '--presto-action-bar-background': this.config?.background_color || '#1d1d1d',\n        }}\n      >\n        {this.config?.text}\n\n        <div slot=\"button\">\n          {this.youtubeButton()}\n          {this.customButton()}\n        </div>\n      </presto-action-bar-ui>\n    );\n  }\n}\n"],"version":3}